# FFT 특성
시간영역의 신호를 주파수 영역으로 변화시키는 알고리즘
연속적인 처리는 불가능
1)샘플링 2)디지털화
샘플링으로 인해 두 영역에서 원래 신호를 동일하게 나타낼 수는 없지만, 샘플 간격이 조밀할 수록 원래 신호에 근사하게 된다.

#sampling
측정하고자 하는 진동, 음향, 또는 전기 신호는 연속적인 아날로그 데이터이다.
연속 신호를 컴퓨터로 측정 분석하는데는 신호를 샘플링하여 특정 시간에서 측정된 신호를 수치로 변환
시간적으로 연속된 신호를 시간적으로 불연속적인 신호로 변환하는 것이 A/D컨버터
1초당 샘플링 수를 샘플링 주파수, 단위는 Hz
측정할 수 있는 최고 주파수는 샘플링 주파수의 1/2가 된다.
샘플링 주파수에 반비례하는 파라미터는 샘플링 주기이고, 샘플링 간의 시간 길이를 나타내는 것
임펄스 응답의 피크를 찾아내어 신호의 지연 시간을 측정할 때, T미만의 지연시간을 측정할 수 없다.
그러나 신호에 3,000Hz 이상의 신호가 있으면, aliasing이 생긴다. 
Aliasing이란 신호 파형이 T 간격으로 샘플링되는 경우에 신호의 주파수가 1/2T 보다 크면, 실제로 존재하지 않은 주파수 신호가 있는 것과 같은 결과
-> 일반적으로 FFT 분석하기 전, 샘플링 주파수의 1/2 이상의 신호를 저역 통과 필터를 사용하여 aliasing 현상을 방지

#FFT 사이즈
FFT 분석의 속도와 해상도는 두 가지 파라미터, 즉 FFT 사이즈와 샘플링 주파수에 의해서 결정된다.
FFT 사이즈와 샘플링 주파수로 주파수 해상도와 FFT 시정수를 계산할 수 있다.
FFT 시정수는 전 샘플 데이터를 모으는데 걸리는 시간
(ex 4096포인트를 샘플링 주파수 44,100으로 나누면 시정수는 0.093s가 된다.)
시정수는 측정하고자 하는 시스템의 decay time보다 길어야 한다.
주파수 분해능을 높이기 위해서는 FFT 포인트 수를 늘리면 되지만, FFT 포인트가 많을수록 처리 시간이 많이 걸린다.
시간 분해능 = FFT 사이즈/샘플링 주파수
주파수 분해능 = 1/시간 분해능
(FFT 사이즈 = 한 번의 FFT 변환을 수행할 때 사용되는 샘플 개수)

#윈도우
진동, 음향 신호를 FFT 분석할 경우에 FFT 연산이 필요한 데이터 수는 유한개이므로, 시간 축 신호를 어느 구간 T만 잘라내어 그 부분만을 연산하는 방식을 취한다.
만약 사인파 신호의 시작과 끝 부분이 제로이면, FFT 분석한 결과는 정확한 진폭과 주파수로 구성된 단일 스펙트럼
그러나 신호의 시작 부분과 끝 부분이 제로가 아니면, 파형을 어느 구간만 절단하여 FFT 분석을 해야 하므로 샘플된 신호에 불연속이 생기게 된다.
이 불연속성이 FFT 분석에서 문제
순음을 FFT분석하면 단일 스펙트럼만 나타나야 하는데, 이웃하는 주파수도 나타남 -> 사이드 로브
사이드 로브는 시간 파형이 zero crossing 이면 생기지 않지만, 실제로 불가능
사이드 로브의 스펙트럼 형상은 신호 절단 방법에 따라서 달라지고, 실제 신호에 대해서는 예측할 수 없다.
이러한 사이드 로브 효과를 줄이기 우해서 신호의 시작 부분과 끝 부분을 강제로 제로로 만든다.
-> 이것은 데이터 샘플에 윈도우를 곱하는 것이다. 
윈도우 함수는 FFT를 수행하기 전, 신호의 양쪽을 부드럽게 감소시키는 역할
이렇게 하면 불연속성이 줄어들고, 사이드 로브 효과가 감소하여 더 정확한 주파수 분석이 가능

- 구형 윈도우는 윈도우 간격 T 속에서 주기화 신호, 또는 윈도우 내에서 완전하게 감쇠되므로 과도 신호에 대해서 최적이다. 
- 일반의 신호는 랜덤 잡음을 포함하므로 완전한 주기 신호는 아니다.
따라서 적당한 윈도우를 이용하여 처리해야 한다. -> 해닝 윈도우 : cos2의 함수
해닝 윈도우는 구형 윈도우와 비교하면, 시간축 파형은 찌그러진 형태이지만 사이드 로브가 적다.
Hamming 윈도우와 hanning 윈도우는 고전적인 윈도우이고, blackman 윈도우와 kaiser 윈도우는 최근에 제안된 것
고전 윈도우와 비교하면 사이드 로브가 적은 편이다.
현대 윈도우는 고전 윈도우보다 사이드 로브가 적고, 주파수 해상도가 좋다. 
구형 윈도우는 주파수 해상도가 가장 좋고, 만약에 임펄스 레스폰스가 1차 반사음이 나타나기 전에 거의 0에 가까운 값이 된다면, 스피커의 측정에서 실내의 반사음을 제거하는데 가장 적절한
시간 창이다.
그러나 직접음의 레벨이 0이 되지 않는 경우에는 hamming 윈도우를 선택
사인파나 음악, 잡음과 같이 임펄스 레스폰스가 아닌 경우에는 blackman 윈도우나 kaiser 윈도우가 적절하다.

# FFT Overlap
Overlap percentage는 데이터 포인트의 FFT 사이즈의 블록의 몇%를 다음 블록에서 다시 사용하는가를 나타낸다.
Overlap 처리는 주파수와 시간 축상에서 해상도를 높이는데 사용한다.
예를 들어 2개의 다른 주파수로 구성된 신호를 분석할 때, 만약 두 신호가 같은 FFT 블록에 포함되면 fFT 처리 결과에서 두 신호가 구분되지 않게 된다.
이러한 경우에 시간 해상도를 높이는데 사용하는 기법이다.
Overlap percentage가 높고 FFT 사이즈가 작으면 시간 해상도가 높지만, 처리 시간이 많이 걸린다.

# Bandwidth
특정한 기능을 수행할 수 있는 주파수의 범위로, 헤르츠 단위로 측정
대역통과 필터가 신호를 3dB 감쇠시키는 주파수 사이의 폭
두개의 각 주파수는 실제 'peak' 진폭을 갖고 FFT 스펙트럼 상에서 적어도 하나의 대역폭을 분리하도록 하여야 함.


